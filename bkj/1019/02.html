<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>处理url</title>
</head>

<body>
  <script type="text/javascript">
    // http://www.domain.com/?user=anonymous&id=123&id=456&city=BeiJing
    function convert(str) {
      var obj = {};
      var temp = [];
      var obj1 = {};

      str.replace(/([^&=]+)=([^&=]+)/g, function(match, p1, p2) {
        obj[p1] = obj[p1] ? (obj[p1] + "," + p2) : p2;
      });

      for (var key in obj) {
        temp.push(key + ":" + obj[key]);
      }

      temp1 = temp[0];
      temp2 = temp[1];
      temp3 = temp[2];
      temp4 = temp1.slice(23, 37);
      temp5 = temp2.slice(3, 10);
      temp6 = temp2.slice(0, 3);


      return "{"+"\n" + temp4 + ","+"\n" + temp6 + "[" + temp5 + "]" + "," +"\n"+ temp3 + "," +"\n"+"enabled"+":"+"true"+","+"\n"+"}"
    }
    console.log(convert("http://www.domain.com/?user=anonymous&id=123&id=456&city=BeiJing"));
  </script>
</body>

</html>
