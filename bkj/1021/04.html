<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>深度克隆</title>
  </head>
  <body>
    <script type="text/javascript">
    /*
    深度克隆, Array,Object
    @obj,可能是任意一种数据类型
    */

   //  {name:'lisi', age:22, hobby:[""]}
    function deepCopy(obj){
      var o; //o是返回的克隆之后的数据

      //Array  or Object
      if (typeof obj === 'object'){

        //普通对象
        if (isPlainObject(obj)){
          o = {};
          for (var key in obj) {
            o[key] = deepCopy(obj[key]);
          }

          return o;
        } else {
          //数组
          o = [];
          for (var i = 0; i < obj.length; i++) {
            o[i] = deepCopy(obj[i]);
          }
          return o;
        }
      } else {
        return obj;
      }
    }


    var stu = {name:'lisi', age: 22, hobby: ["one", "two", {three: [1,2,3]}]};
    var result = deepCopy(stu);

    result.hobby[2].three.push(4);
    console.log("result = ", result);
    console.log("stu = ", stu);

    </script>
  </body>
</html>
