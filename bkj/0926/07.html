<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>json 数据的处理</title>
  </head>
  <body>
    <script type="text/javascript">
    var stu={
      "name":"lisi",
      "age":10,
      "hobby":["read","drink","eat"],
      "score": 88
    };
      //json 序列化
      //就是将json对象转换成字符串
    var str=JSON.stringify(stu,function(key,value){
      //console.log("key = ", key);
      //console.log("value = ", value); key属性 value属性值

      if (key==="age"){
        return value+100;
      }
      if (key==="score"){
        return value-10;
      }
      return value;
    });
    console.log(str);//age score都变值了,说明可以操作数据,但是不会改变初始的对象,字符串类型

    str=JSON.stringify(stu,['name','age','score']);
    console.log(str);//中括号中的属性直接可显示出,值为初始的值,字符串类型

    str=JSON.stringify(stu,null,'\t');//第三个参数为分隔符,字符串类型
    console.log(str);

    console.log("---------------------------");

        //json的解析
       //json反序列化
    var result='{"name":"lisi","age":10,"score":88}';
       //将字符串变成JSON对象
    console.log(JSON.parse(result));

    //JSON.parse转换的是json格式的字符串，不是任意的字符串！！！！！
   // console.log(JSON.parse("hello"));
    var obj=JSON.parse(result,function(key,value){
      if(key==='name'){
        return "我是"+value;
      }
      if(key==="score"){
        return value-10;
      }
      return value;
    });

    console.log(obj);
    //注意:JSON的stringify和parse方法都必须有返回值
    </script>
  </body>
</html>
